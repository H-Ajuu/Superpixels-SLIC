# Superpixels-SLIC
SLIC算法超像素视频生成软件

## 算法基本原理
简单线性迭代聚类（SLIC）采用K均值算法生成超像素，与其他超像素生成算法相比，通过将搜索空间限制为与超像素大小成比例的区域，显着地减少了优化中的距离计算的数量。这降低了像素数N的线性复杂度，并且与超像素k的数量无关。
### 图像分割块的初始化
每一个图像块都是一个聚类，聚类的中心称为 superpixel，聚类的个数 k是人为设定的，SLIC 算法先将图像分成大小大小一致的图像 patch，假设图像的像素个数为 N, 需要分割的图像 patch 个数为 k, 那么每个 patch 的大小为 S×S，S=√(N/k)
### 聚类中心的初始化
在划分好的图像块里，随机采样一个点作为聚类的中心，，在采样点附近 3×3的区域计算临近像素点的梯度，选择临近点中梯度最小的点为聚类中心。目的是避免将超像素定位在边缘上，并且减少用噪声像素接种超像素的机会。
### 计算像素点到聚类中心的距离
一般的聚类算法会计算像素点离每一个聚类中心的距离， SLIC 算法简化了这一步，只计算每个聚类中心周围 2S×2S 范围类的像素点与该聚类中心的距离，这样可以节省很多的运算时间。  
但是简单定义D为空间中的距离将导致不同超像素大小的聚类行为的不一致。对于大的超像素，空间距离超过颜色接近度，使空间接近度比颜色有更多的相对重要性。这会产生粘附到图像边界的紧凑超像素。而对于较小的超像素，情况又正好相反。为了将两个距离组合，有下式：  
d_c=√((l_j-l_i )^2+(a_j-a_i )^2+(b_j-b_i )^2 )  
d_s=√((x_j-x_i )^2+(y_j-y_i )^2 )  
D^'=√((d_c/N_c )^2+(d_s/N_s )^2 )  
给定群集内预期的最大空间距离应对应于采样间隔，Ns=S，最大颜色距离则将Nc固定为常数m来避免，就有  
D^'=√((d_c/m)^2+(d_s/S)^2 )  
算法最后衡量距离的形式如下  
D=√((d_c )^2+(d_s/S)^2 m^2 )
### 重新聚类
计算完距离之后，每一个像素点都会更新自己所属的图像块，将同一个图像块的像素点取平均，得到新的聚类中心，然后再重复前面的步骤，直到两次聚类中心的距离小于某个阈值。
